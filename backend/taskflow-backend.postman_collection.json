{
  "info": {
    "name": "Taskflow Backend",
    "_postman_id": "7e3b0f0e-5c15-4d75-8f0c-d24f0d3b31b2",
    "description": "Postman collection for the Taskflow backend APIs (auth, tasks, sprints, notifications, analytics). Set the {{baseUrl}} and {{authToken}} variables before sending requests.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3000" },
    { "key": "authToken", "value": "" },
    { "key": "tenantId", "value": "" },
    { "key": "userId", "value": "" },
    { "key": "taskId", "value": "" },
    { "key": "resetToken", "value": "" },
    { "key": "otp", "value": "" },
    { "key": "sprintId", "value": "" },
    { "key": "notificationId", "value": "" }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "GET /",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/",
              "host": ["{{baseUrl}}"],
              "path": [""]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register (auto tenant for first user)",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Jane Doe\",\n  \"email\": \"jane@example.com\",\n  \"password\": \"ChangeMe123!\",\n  \"organizationName\": \"Jane Co\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "Creates a user. First ever user becomes superadmin. Without tenantId a new tenant is created for the user."
          },
          "response": []
        },
        {
          "name": "Login",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jane@example.com\",\n  \"password\": \"ChangeMe123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Returns JWT token. Set the response token to {{authToken}} for subsequent calls."
          },
          "response": []
        },
        {
          "name": "Forgot Password (send OTP)",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jane@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/forgot-password",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "forgot-password"]
            }
          },
          "response": []
        },
        {
          "name": "Verify OTP",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jane@example.com\",\n  \"otp\": \"{{otp}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/verify-otp",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "verify-otp"]
            },
            "description": "Validates the OTP; returns resetToken. Save it to {{resetToken}}."
          },
          "response": []
        },
        {
          "name": "Reset Password",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resetToken\": \"{{resetToken}}\",\n  \"newPassword\": \"NewPass123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "reset-password"]
            }
          },
          "response": []
        },
        {
          "name": "Create Tenant User (tenantAdmin/superadmin)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Member One\",\n  \"email\": \"member1@example.com\",\n  \"password\": \"ChangeMe123!\",\n  \"role\": \"user\",\n  \"tenantId\": \"{{tenantId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/tenant/users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "tenant", "users"]
            },
            "description": "tenantAdmin creates users within their tenant; superadmin must supply tenantId and can choose role user or tenantAdmin."
          },
          "response": []
        },
        {
          "name": "List Users (tenantAdmin/superadmin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "users"]
            },
            "description": "tenantAdmin sees users in their tenant; superadmin sees all."
          },
          "response": []
        },
        {
           "name": "Update User (tenantAdmin/superadmin)",
           "request": {
             "method": "PATCH",
             "header": [{ "key": "Content-Type", "value": "application/json" }],
             "body": {
               "mode": "raw",
               "raw": "{\n  \"name\": \"Updated Name\",\n  \"email\": \"updated@example.com\",\n  \"role\": \"user\"\n}"
             },
             "url": {
               "raw": "{{baseUrl}}/api/auth/users/{{userId}}",
               "host": ["{{baseUrl}}"],
               "path": ["api", "auth", "users", "{{userId}}"]
             }
           },
           "response": []
        },
        {
           "name": "Delete User (tenantAdmin/superadmin)",
           "request": {
             "method": "DELETE",
             "header": [],
             "url": {
               "raw": "{{baseUrl}}/api/auth/users/{{userId}}",
               "host": ["{{baseUrl}}"],
               "path": ["api", "auth", "users", "{{userId}}"]
             }
           },
           "response": []
        },
        {
          "name": "Get Organization",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/organization",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "organization"]
            }
          },
          "response": []
        },
        {
          "name": "Update Organization Name (tenantAdmin/superadmin)",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Acme Org\",\n  \"tenantId\": \"{{tenantId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/organization",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "organization"]
            },
            "description": "tenantAdmin updates their own org; superadmin can target tenantId."
          },
          "response": []
        },
        {
           "name": "List All Organizations (superadmin)",
           "request": {
             "method": "GET",
             "header": [],
             "url": {
               "raw": "{{baseUrl}}/api/auth/organizations",
               "host": ["{{baseUrl}}"],
               "path": ["api", "auth", "organizations"]
             }
           },
           "response": []
        },
        {
           "name": "Create Organization (superadmin)",
           "request": {
             "method": "POST",
             "header": [{ "key": "Content-Type", "value": "application/json" }],
             "body": {
               "mode": "raw",
               "raw": "{\n  \"name\": \"New Org\"\n}"
             },
             "url": {
               "raw": "{{baseUrl}}/api/auth/organizations",
               "host": ["{{baseUrl}}"],
               "path": ["api", "auth", "organizations"]
             }
           },
           "response": []
        },
        {
          "name": "Current User (/me)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me"]
            }
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "logout"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Tasks",
      "item": [
        {
          "name": "List Tasks",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tasks?page=1&limit=10&status=todo&q=&tenantId={{tenantId}}&userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tasks"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "10" },
                { "key": "status", "value": "todo" },
                { "key": "q", "value": "" },
                { "key": "tenantId", "value": "{{tenantId}}" },
                { "key": "userId", "value": "{{userId}}" }
              ]
            },
            "description": "tenant context required unless superadmin. Regular users only see their own tasks."
          },
          "response": []
        },
        {
          "name": "Get Task",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tasks", "{{taskId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Create Task",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Draft proposal\",\n  \"description\": \"Outline initial draft\",\n  \"status\": \"todo\",\n  \"tenantId\": \"{{tenantId}}\",\n  \"userId\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/tasks",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tasks"]
            },
            "description": "superadmin must provide tenantId and userId; tenantAdmin may target users in their tenant; regular users create for themselves."
          },
          "response": []
        },
        {
          "name": "Update Task",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Draft proposal v2\",\n  \"description\": \"Add more detail\",\n  \"status\": \"in-progress\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tasks", "{{taskId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Task",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tasks/{{taskId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tasks", "{{taskId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Add Attachments",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                 { "key": "files", "type": "file" }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/tasks/{{taskId}}/attachments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tasks", "{{taskId}}", "attachments"]
            }
          },
          "response": []
        },
        {
          "name": "Remove Attachment",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tasks/{{taskId}}/attachments/:attachmentId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tasks", "{{taskId}}", "attachments", ":attachmentId"],
              "variable": [{ "key": "attachmentId", "value": "" }]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Sprints",
      "item": [
        {
          "name": "List Sprints",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sprints",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sprints"]
            }
          },
          "response": []
        },
        {
          "name": "Get Sprint",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sprints/{{sprintId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sprints", "{{sprintId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Create Sprint",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Sprint 1\",\n  \"startDate\": \"2023-10-01\",\n  \"endDate\": \"2023-10-14\",\n  \"tenantId\": \"{{tenantId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/sprints",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sprints"]
            }
          },
          "response": []
        },
        {
          "name": "Update Sprint",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Sprint 1 Updated\",\n  \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/sprints/{{sprintId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sprints", "{{sprintId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Sprint",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sprints/{{sprintId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sprints", "{{sprintId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "List Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications?page=1&limit=20&isRead=false",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" },
                { "key": "isRead", "value": "false" }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Unread Count",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/unread-count",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications", "unread-count"]
            }
          },
          "response": []
        },
        {
          "name": "Mark As Read",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notificationIds\": [\"{{notificationId}}\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/notifications/mark-read",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications", "mark-read"]
            }
          },
          "response": []
        },
        {
          "name": "Mark All As Read",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/mark-all-read",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications", "mark-all-read"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Notification",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications/{{notificationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications", "{{notificationId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete All Read",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notifications",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications"]
            }
          },
          "response": []
        },
        {
          "name": "Register FCM Token",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"fcm_token_here\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/notifications/fcm-token",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notifications", "fcm-token"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Analytics",
      "item": [
        {
          "name": "Task Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "analytics", "stats"]
            },
            "description": "Requires tenantAdmin or superadmin"
          },
          "response": []
        },
        {
          "name": "Workload Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analytics/workload",
              "host": ["{{baseUrl}}"],
              "path": ["api", "analytics", "workload"]
            },
            "description": "Requires tenantAdmin or superadmin"
          },
          "response": []
        }
      ]
    }
  ]
}
